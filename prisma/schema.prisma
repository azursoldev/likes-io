generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://doadmin:AVNS_lkLr8-DGC-qPACXAnWJ@db-postgresql-blr1-25504-do-user-28518962-0.j.db.ondigitalocean.com:25060/defaultdb?sslmode=require"
}

model User {
  id                  String               @id @default(cuid())
  email               String               @unique
  password            String
  name                String?
  role                UserRole             @default(USER)
  isBlocked           Boolean              @default(false)
  createdAt           DateTime             @default(now())
  updatedAt           DateTime             @updatedAt
  avatarUrl           String?
  walletBalance       Float                @default(0)
  blogPosts           BlogPost[]
  orders              Order[]
  passwordResetTokens PasswordResetToken[]
  walletTransactions  WalletTransaction[]
  reviews             Review[]

  @@index([email])
  @@index([role])
}

model Order {
  id          String      @id @default(cuid())
  userId      String?
  serviceId   String
  platform    Platform
  serviceType ServiceType
  quantity    Int
  price       Float
  currency    String      @default("USD")
  status      OrderStatus @default(PENDING_PAYMENT)
  link        String?
  japOrderId  String?
  japStatus   String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  upsellData  Json?
  service     Service     @relation(fields: [serviceId], references: [id])
  user        User?       @relation(fields: [userId], references: [id], onDelete: Cascade)
  payment     Payment?
  reviews     Review[]

  @@index([userId])
  @@index([status])
  @@index([platform])
  @@index([createdAt])
}

model Service {
  id           String      @id @default(cuid())
  name         String
  platform     Platform
  serviceType  ServiceType
  japServiceId String?
  basePrice    Float
  markup       Float       @default(0)
  finalPrice   Float
  minQuantity  Int?
  maxQuantity  Int?
  isActive     Boolean     @default(true)
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  orders       Order[]

  @@unique([platform, serviceType, japServiceId])
  @@index([platform])
  @@index([serviceType])
  @@index([isActive])
}

model Payment {
  id            String         @id @default(cuid())
  orderId       String         @unique
  gateway       PaymentGateway
  transactionId String?
  amount        Float
  currency      String         @default("USD")
  status        PaymentStatus  @default(PENDING)
  webhookData   Json?
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  order         Order          @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@index([status])
  @@index([gateway])
  @@index([createdAt])
}

model Upsell {
  id            String       @id @default(cuid())
  title         String
  description   String?
  serviceId     String?
  packageId     String?
  basePrice     Float
  discountType  DiscountType @default(PERCENT)
  discountValue Float
  badgeText     String?
  badgeColor    String?      @default("red")
  badgeIcon     String?
  platform      Platform?
  serviceType   ServiceType?
  minSubtotal   Float?
  isActive      Boolean      @default(true)
  sortOrder     Int          @default(0)
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt

  @@index([isActive])
  @@index([platform, serviceType])
}

model SocialProfile {
  id          String   @id @default(cuid())
  platform    Platform
  username    String
  profileData Json
  posts       Json?
  cachedAt    DateTime @default(now())
  expiresAt   DateTime

  @@unique([platform, username])
  @@index([platform, username])
  @@index([expiresAt])
}

model SocialProof {
  id                String   @id @default(cuid())
  platform          String
  username          String
  service           String
  timeText          String
  notificationLabel String   @default("just purchased")
  displayOrder      Int      @default(0)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model AdminSettings {
  id                      String   @id @default(cuid())
  japApiUrl               String?
  japApiKey               String?
  checkoutApiKey          String?
  checkoutWebhookSecret   String?
  bigPayMeApiKey          String?
  bigPayMeWebhookSecret   String?
  rapidApiKey             String?
  rapidApiInstagramHost   String?
  rapidApiTikTokHost      String?
  rapidApiYouTubeHost     String?
  smtpHost                String?
  smtpUser                String?
  smtpPass                String?
  defaultCurrency         String   @default("USD")
  updatedAt               DateTime @updatedAt
  bannerDurationHours     Int      @default(24)
  bannerEnabled           Boolean  @default(true)
  bigPayApiSecret         String?
  bigPayDisplayName       String?
  bigPayMerchantId        String?
  bigPayTestMode          Boolean  @default(false)
  cryptomusApiKey         String?
  cryptomusDisplayName    String?
  cryptomusMerchantId     String?
  cryptomusTestMode       Boolean  @default(false)
  customSitemapXml        String?
  exitIntentDiscountCode  String?
  exitIntentEnabled       Boolean  @default(false)
  exitIntentSubtitle      String?
  exitIntentTitle         String?
  facebookClientId        String?
  facebookClientSecret    String?
  faviconUrl              String?
  footerLogoUrl           String?
  googleAnalyticsId       String?
  googleClientId          String?
  googleClientSecret      String?
  googleSiteVerification  String?
  headerLogoUrl           String?
  homeMetaDescription     String?
  homeMetaTitle           String?
  inboxCount              Int      @default(0)
  myFatoorahBaseURL       String?  @default("https://apitest.myfatoorah.com")
  myFatoorahTestMode      Boolean  @default(true)
  myFatoorahToken         String?
  myFatoorahWebhookSecret String?
  newServiceIndicator     Boolean  @default(true)
  recaptchaSecretKey      String?
  recaptchaSiteKey        String?
  robotsTxtContent        String?  @default("User-agent: *\nAllow: /")
  sitemapEnabled          Boolean  @default(true)
  smtpFrom                String?
  smtpPort                Int?
  smtpSecure              Boolean  @default(false)
  supportEmail            String?
  systemStatus            String?  @default("Operational")
  systemStatusEnabled     Boolean  @default(true)
  systemStatusMessage     String?  @default("All Systems Operational")
  teamCount               Int      @default(0)

  @@map("admin_settings")
}

model EmailLog {
  id                String   @id @default(cuid())
  userId            String?
  type              String
  status            String
  providerMessageId String?
  metadata          Json?
  createdAt         DateTime @default(now())

  @@index([userId])
  @@index([type])
  @@index([status])
  @@map("email_logs")
}

model HomepageContent {
  id                      String   @id @default(cuid())
  heroTitle               String
  heroSubtitle            String
  heroRating              String?
  heroReviewCount         String?
  heroCtaButtons          Json?
  isActive                Boolean  @default(true)
  updatedAt               DateTime @updatedAt
  benefits                Json?
  getStartedMainHeading   String?
  getStartedPlatformIcons Json?
  heroProfileEngagement   String?
  heroProfileFollowers    String?
  heroProfileHandle       String?
  heroProfileImage        String?
  heroProfileLikes        String?
  heroProfileRole         String?
  influenceImage          String?
  influenceSteps          Json?
  influenceSubtitle       String?
  influenceTitle          String?
  platformCards           Json?
  platformSubtitle        String?
  platformTitle           String?
  quickStartButtons       Json?
  quickStartDescription1  String?
  quickStartDescription2  String?
  quickStartTitle         String?
  serviceIcons            Json?
  socialProofLabel        String?  @default("just purchased")
  whyChooseSubtitle       String?
  whyChooseTitle          String?

  @@map("homepage_content")
}

model TeamMember {
  id           String     @id @default(cuid())
  name         String
  role         String
  displayOrder Int        @default(0)
  isActive     Boolean    @default(true)
  avatarUrl    String?
  createdAt    DateTime   @default(now())
  description  String
  linkedinUrl  String?
  twitterUrl   String?
  updatedAt    DateTime   @updatedAt
  blogPosts    BlogPost[]

  @@index([displayOrder])
  @@map("team_members")
}

model HeroSocialUpdate {
  id           Int     @id @default(autoincrement())
  handle       String
  item         String
  time         String
  displayOrder Int     @default(0)
  isActive     Boolean @default(true)

  @@index([displayOrder])
  @@map("hero_social_updates")
}

model PromoBar {
  id               String   @id @default(cuid())
  messages         Json
  countdownSeconds Int?
  isVisible        Boolean  @default(true)
  displayOrder     Int      @default(0)
  updatedAt        DateTime @updatedAt

  @@map("promo_bar")
}

model FeaturedOn {
  id           Int                  @id @default(autoincrement())
  brandName    String
  logoUrl      String?
  displayOrder Int                  @default(0)
  isActive     Boolean              @default(true)
  pageLinks    FeaturedOnPageLink[]

  @@index([displayOrder])
  @@map("featured_on")
}

model FeaturedOnPageLink {
  id           Int        @id @default(autoincrement())
  featuredOnId Int
  pagePath     String
  link         String?
  nofollow     Boolean    @default(false)
  featuredOn   FeaturedOn @relation(fields: [featuredOnId], references: [id], onDelete: Cascade)

  @@index([featuredOnId])
  @@map("featured_on_page_links")
}

model PlatformSection {
  id          Int      @id @default(autoincrement())
  platform    Platform @unique
  title       String
  description String
  tags        Json
  ctaText     String
  isActive    Boolean  @default(true)

  @@map("platform_section")
}

model GetStartedContent {
  id               Int         @id @default(autoincrement())
  platform         Platform
  packType         ServiceType
  quality          String
  features         Json
  explanation      String?
  pricing          Json?
  isActive         Boolean     @default(true)
  explanationTitle String?
  heading          String?

  @@unique([platform, packType, quality])
  @@index([platform])
  @@map("get_started_content")
}

model InfluenceSection {
  id          Int     @id @default(autoincrement())
  title       String
  description String
  steps       Json
  isActive    Boolean @default(true)

  @@map("influence_section")
}

model AdvantageSection {
  id       Int     @id @default(autoincrement())
  title    String
  subtitle String
  items    Json
  isActive Boolean @default(true)

  @@map("advantage_section")
}

model QuickStartSection {
  id          Int     @id @default(autoincrement())
  title       String
  description String
  buttons     Json
  isActive    Boolean @default(true)

  @@map("quick_start_section")
}

model ServicePageContent {
  id                    Int         @id @default(autoincrement())
  platform              Platform
  serviceType           ServiceType
  heroTitle             String
  heroSubtitle          String
  heroRating            String?
  heroReviewCount       String?
  assuranceCardText     String?
  packages              Json
  qualityCompare        Json?
  howItWorks            Json?
  isActive              Boolean     @default(true)
  updatedAt             DateTime    @updatedAt
  benefits              Json?
  customEnabled         Boolean     @default(false)
  customMaxQuantity     Int?
  customMinQuantity     Int?
  customRoundToStep     Boolean     @default(false)
  customStep            Int?
  learnMoreModalContent String?
  learnMoreText         String?
  metaDescription       String?
  metaTitle             String?
  moreServicesBody      String?
  moreServicesButtons   Json?
  moreServicesHighlight String?
  moreServicesTitle     String?
  slug                  String?     @unique

  @@unique([platform, serviceType])
  @@index([platform, serviceType])
  @@map("service_page_content")
}

model FAQ {
  id           String       @id @default(cuid())
  question     String
  answer       String
  category     String?
  platform     Platform?
  serviceType  ServiceType?
  displayOrder Int          @default(0)
  isActive     Boolean      @default(true)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime?    @updatedAt

  @@index([category])
  @@index([platform])
  @@index([serviceType])
  @@map("faqs")
}

model Review {
  id          String   @id @default(cuid())
  userId      String?
  orderId     String?
  rating      Int
  comment     String
  isPublished Boolean  @default(false)
  createdAt   DateTime @default(now())
  authorName  String?
  updatedAt   DateTime @updatedAt
  order       Order?   @relation(fields: [orderId], references: [id])
  user        User?    @relation(fields: [userId], references: [id])

  @@index([isPublished])
  @@index([rating])
  @@map("reviews")
}

model PasswordResetToken {
  id        String    @id @default(cuid())
  userId    String
  tokenHash String
  expiresAt DateTime
  usedAt    DateTime?
  createdAt DateTime  @default(now())
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([expiresAt])
}

model Testimonial {
  id           String       @id @default(cuid())
  handle       String
  role         String?      @default("Verified Buyer")
  text         String
  rating       Int
  platform     Platform?
  isApproved   Boolean      @default(false)
  isFeatured   Boolean      @default(false)
  displayOrder Int          @default(0)
  createdAt    DateTime     @default(now())
  serviceType  ServiceType?
  updatedAt    DateTime     @updatedAt

  @@index([isApproved])
  @@index([platform])
  @@index([serviceType])
  @@map("testimonials")
}

model BlogPost {
  id              String      @id @default(cuid())
  title           String
  slug            String      @unique
  content         String
  excerpt         String?
  coverImage      String?
  authorId        String
  teamMemberId    String?
  category        String?
  metaTitle       String?
  metaDescription String?
  isPublished     Boolean     @default(false)
  publishedAt     DateTime?
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  author          User        @relation(fields: [authorId], references: [id])
  teamMember      TeamMember? @relation(fields: [teamMemberId], references: [id])

  @@index([slug])
  @@index([isPublished])
}

model LegalPage {
  id        String   @id @default(cuid())
  slug      String   @unique
  title     String
  sections  Json
  updatedAt DateTime @updatedAt

  @@map("legal_pages")
}

model EmailTemplate {
  id        String   @id @default(cuid())
  subject   String
  body      String
  type      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("email_templates")
}

model BellNotification {
  id          String   @id @default(cuid())
  title       String
  description String
  icon        String
  priority    String   @default("low")
  category    String   @default("system")
  iconBg      String?
  isRead      Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("bell_notifications")
}

model BannerMessage {
  id        String   @id @default(cuid())
  text      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  icon      String   @default("ðŸ”¥")

  @@map("banner_messages")
}

model IconAsset {
  id           String   @id @default(cuid())
  name         String   @unique
  category     String?
  url          String?
  alt          String?
  displayOrder Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("icon_assets")
}

model Coupon {
  id                    String             @id @default(cuid())
  code                  String             @unique
  type                  CouponType
  value                 Float
  currency              String?            @default("USD")
  status                CouponStatus       @default(ACTIVE)
  startsAt              DateTime?
  expiresAt             DateTime?
  maxRedemptions        Int?
  maxRedemptionsPerUser Int?
  minOrderAmount        Float?
  applicableServices    Json?
  createdAt             DateTime           @default(now())
  updatedAt             DateTime           @updatedAt
  redemptions           CouponRedemption[]

  @@index([code])
  @@index([status])
  @@map("coupons")
}

model CouponRedemption {
  id         String   @id @default(cuid())
  couponId   String
  userId     String?
  orderId    String?
  redeemedAt DateTime @default(now())
  coupon     Coupon   @relation(fields: [couponId], references: [id])

  @@index([couponId])
  @@index([userId])
  @@map("coupon_redemptions")
}

model FreeToolPageContent {
  id               String   @id @default(cuid())
  slug             String   @unique
  heroTitle        String
  heroDescription  String
  rating           String
  reviewCount      String
  step1Title       String?
  step1Description String?
  step2Title       String?
  step2Description String?
  step3Title       String?
  step3Description String?
  inputLabel       String?
  inputPlaceholder String?
  buttonText       String?
  assurance1       String?
  assurance2       String?
  assurance3       String?
  faqs             Json?
  reviews          Json?
  reviewsTitle     String?
  reviewsSubtitle  String?
  updatedAt        DateTime @updatedAt

  @@map("free_tool_page_content")
}

model WalletTransaction {
  id        String        @id @default(cuid())
  userId    String
  amount    Float
  currency  String        @default("USD")
  type      WalletTxnType
  note      String?
  createdAt DateTime      @default(now())
  user      User          @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, createdAt])
}

model Navigation {
  id                String   @id @default(cuid())
  headerMenu        Json?
  footerMenu        Json?
  headerColumnMenus Json?
  footerColumnMenus Json?
  updatedAt         DateTime @updatedAt

  @@map("navigation")
}

enum DiscountType {
  PERCENT
  FIXED
}

enum CouponType {
  PERCENT
  FIXED
}

enum CouponStatus {
  ACTIVE
  DISABLED
}

enum UserRole {
  USER
  ADMIN
}

enum Platform {
  INSTAGRAM
  TIKTOK
  YOUTUBE
  REVIEWS
  FREE_INSTAGRAM
}

enum ServiceType {
  LIKES
  FOLLOWERS
  VIEWS
  SUBSCRIBERS
}

enum OrderStatus {
  PENDING_PAYMENT
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
  REFUNDED
}

enum PaymentGateway {
  CHECKOUT_COM
  BIGPAYME
  CRYPTOMUS
  MYFATOORAH
  WALLET
}

enum PaymentStatus {
  PENDING
  SUCCESS
  FAILED
  REFUNDED
}

enum WalletTxnType {
  CREDIT
  DEBIT
}
